# Technical Context

This document outlines the key technologies, libraries, and technical decisions for the Audio Processing Pipeline project.

## Core Technologies

*   **Python:** Primary programming language.
*   **FFmpeg:** Used for audio manipulation tasks, such as mixing audio streams. It must be installed and accessible in the system PATH.

## Key Python Libraries

*   **`pyannote.audio`:** Used for speaker diarization.
    *   **RTTM File Handling:** Diarization results in RTTM format are read using `pyannote.core.Annotation.read_rttm(rttm_file_path)`. This method directly returns an `Annotation` object.
*   **`openai-whisper`:** Used for speech-to-text transcription.
*   **`pydub`:** Used for audio slicing and manipulation.
*   **`torch`:** Dependency for `pyannote.audio` and `openai-whisper`.
*   **LM Studio (Local LLM Server):** Used for generating summaries from transcripts. Communication happens via HTTP requests to the local server.

## Workflow and Execution

*   **`workflow_executor.py`:** Orchestrates the processing of individual audio files through a series of configurable stages.
*   **`call_processor.py`:** Aggregates outputs for paired call recordings (`recv_out` and `trans_out`) after they have been processed by `workflow_executor.py`.
*   **Workflow Configuration:** Defined in JSON files (e.g., `default_audio_analysis_workflow.json`), specifying stages, modules, and data flow.

## PII Safety

*   A `pii_safe_file_prefix` (e.g., `call_YYYYMMDD-HHMMSS`) is generated by `workflow_executor.py` and passed to modules to ensure all intermediate and output files are named in a PII-safe manner.

## Important Notes

*   Ensure all Python dependencies are installed (refer to `requirements.txt` if available or module imports).
*   `ffmpeg` must be installed and accessible in the system's PATH for audio mixing and potentially other audio operations.
*   A local LM Studio instance must be running and configured with a suitable model for LLM summarization tasks. 